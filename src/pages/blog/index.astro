---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import PostCard from '../../components/PostCard.astro';

const allPosts = await getCollection('blog');

const sortedPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

---

<MainLayout title="Астро Блог | Celestea">
    <Header/>
  <main class="mx-auto px-4 py-12 blog">
    <div class="container">
        <h1 class="text-4xl font-bold text-center mb-4">Астро Блог</h1>
        <p class="text-center text-gray-600 mb-12 text-lg">
        Точечные разборы вашей натальной карты и психологии
        </p>
        <div class="flex flex-wrap justify-center gap-4 mb-12 mt-12">
            <a href="/category/horoscope" class="px-4 py-2 rounded-full text-purple-800 hover:bg-purple-200 transition">
                Зодиаки
            </a>
            <a href="/category/planets" class="px-4 py-2 rounded-full text-pink-800 hover:bg-pink-200 transition">
              Планеты
            </a>
            <a href="/category/myths" class="px-4 py-2 rounded-full text-purple-800 hover:bg-purple-200 transition">
              Мифология
          </a>
            <a href="/category/money" class="px-4 py-2 rounded-full text-green-800 hover:bg-green-200 transition">
              Деньги
            </a>
            <a href="/category/karma" class="px-4 py-2 rounded-full text-indigo-800 hover:bg-indigo-200 transition">
              Карма
            </a>
            <a href="/category/relationships" class="px-4 py-2 rounded-full text-pink-800 hover:bg-pink-200 transition">
              Отношения
            </a>
          </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8">
        {sortedPosts.map((post) => (
            <article class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-purple-100 flex flex-col h-full">
                <PostCard post={post} />
            </article>
        ))}
        </div>
    </div>
  </main>
  <Footer/>
</MainLayout>